import pandas as pd
from ast import literal_eval
import json

"""
Everynoise has a long, ever-growing list of genres. However, many of these are not very popular and never really will
appear in the wild when gathering Spotify songs. Here, we create a subset of the everynoise genres to get a total of
4444 of them to use for clustering.
"""

data = pd.read_csv('../data/msd/spotify_genres.csv')
data = [literal_eval(x) for x in data['genres'].values]
data = [item for sublist in data for item in sublist]
data += ["trap argentino", "kleine hoerspiel", "trap triste", "polish trap", "funk paulista", "trap italiana", "japanese teen pop", "trap brasileiro", "background piano", "rap espanol", "r&b en espanol", "trap boricua", "korean r&b", "piseiro", "german cloud rap", "turkish alt pop", "j-pixie", "rap belge", "lo-fi chill", "funk pop", "pop rap brasileiro", "forro de favela", "frauenrap", "russelater", "funk consciente", "russian dance", "hawaiian hip hop", "albanian hip hop", "drill francais", "indie triste", "modern alternative pop", "tekk", "r&b brasileiro", "j-division", "funk bh", "rave funk", "indian instrumental", "k-indie", "trap baiano", "neo-singer-songwriter", "russian drill", "brega funk", "albanian pop", "trap venezolano", "rap df", "aussie drill", "swedish tropical house", "nerdcore brasileiro", "pinoy indie", "pet calming", "ottawa rap", "russian gangster rap", "russian emo rap", "g-house", "disney horspiele", "trap funk", "j-pop boy group", "chill pop", "rkt", "japanese soul", "turkish deep house", "greek trap", "trap carioca", "indonesian folk pop", "australian alternative pop", "thai indie pop", "australian trap", "musica triste brasileira", "dangdut koplo", "desi trap", "tollywood", "j-idol", "lagu jawa", "russian rave", "kazakh pop", "rap baiano", "javanese dangdut", "kazakh hip hop", "music box", "scam rap", "cumbia santafesina", "central asian hip hop", "rap mineiro", "deep pop edm", "reggaeton mexicano", "zhongguo feng", "indonesian r&b", "minecraft", "israeli mediterranean", "turkce drill", "drill espanol", "rap algerien", "rap tunisien", "russian grime", "city pop", "japanese pop rap", "gujarati pop", "chihuahua indie", "indonesian folk", "turkce slow sarkilar", "kosovan pop", "classic city pop", "vietnamese hip hop", "reggaeton cristiano", "acoustic chill", "japanese trap", "chinese idol pop", "muziek voor kinderen", "barnsagor", "chinese viral pop", "lo-fi vgm", "oyun havasi", "indonesian viral pop", "emo rap italiano", "batidao romantico", "rap cearense", "haryanvi pop", "stomp and flutter", "indie viet", "german viral rap", "acoustic opm", "thai indie rock", "hard bass", "oc rap", "irish hip hop", "viking folk", "drill italiana", "rap lyonnais", "scandinavian r&b", "thai rock", "mollywood", "trap antillais", "rap baixada fluminense", "experimental r&b", "greek drill", "latin viral rap", "japanese vtuber", "indian singer-songwriter", "huzunlu sarkilar", "trap dominicano", "karadeniz pop", "quran", "yaoi", "russian chanson", "groove gospel", "seiyu", "classic thai pop", "islamic recitation", "trap catala", "colombian indie", "dong-yo", "indonesian city pop", "thai hip hop", "turkce kadin rap", "trap pesado", "rap montrealais", "idol kayo", "shonen", "chinese singer-songwriter", "dangdut remix", "high-tech minimal", "romanian trap", "military rap", "rap feminino nacional", "afro r&b", "punk rock mexicano", "pinoy pop punk", "korean city pop", "trap metal italiana", "kollywood", "reggae cristao", "egyptian hip hop", "diy emo", "alte", "ritmo kombina", "chinese hip hop", "thai idol", "trap tuga", "men chika", "pony", "reggae gaucho", "png pop", "vietnamese singer-songwriter", "russian viral pop", "rap cristao", "binaural", "korean old school hip hop", "belarusian pop", "newcastle nsw indie", "australian post-hardcore", "arkansas hip hop", "brega romantico", "korean electropop", "beach house", "russian reggae", "cumbia andina mexicana", "chinese electropop", "chinese drama ost", "finnish trap", "dutch trap", "rap sardegna", "british children's music", "hard motivation", "ukrainian indie", "baglama", "japanese new wave", "hokkaido indie", "orlando indie", "talentkonkurranse", "electronic djent", "thai folk pop", "musica alagoana", "fremantle indie", "uk post-punk revival", "vietnamese pop", "vlaamse kinderliedje", "korean mask singer", "trap peruano", "deep melodic metalcore", "rap uruguayo", "thai folk rock", "k-rock"]
data = sorted(list(set(data)))
data.remove('tahitian')  # This one doesn't seem to appear in 1d list, so we will ignore it
idx2genre = {idx: genre for idx, genre in enumerate(data)}
genre2idx = {genre: idx for idx, genre in enumerate(data)}

with open('../data/genre2vec/genre2idx.json', 'w') as f:
    f.write(json.dumps(genre2idx))
with open('../data/genre2vec/idx2genre.json', 'w') as f:
    f.write(json.dumps(idx2genre))
